{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _toConsumableArray from \"/Users/Shital.r.bavikar/dev/reactjs/demo/next-apollo-client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport React, { useRef, useEffect } from \"react\";\nimport uniqid from 'uniqid';\nimport { useQuery } from \"@apollo/client\";\nimport { Spinner } from \"../Spinner/Spinner\";\nimport styles from './Users.module.css';\nimport { UserCard } from './UserCard';\nimport { GET_USERS_INFO } from '../../lib/queries/getUsersInfo';\nexport var Users = function Users() {\n  var messageRef = useRef(null);\n\n  var _useQuery = useQuery(GET_USERS_INFO, {\n    variables: {\n      after: null\n    }\n  }),\n      loading = _useQuery.loading,\n      error = _useQuery.error,\n      data = _useQuery.data,\n      fetchMore = _useQuery.fetchMore;\n\n  useEffect(function () {\n    var _messageRef$current;\n\n    return (_messageRef$current = messageRef.current) === null || _messageRef$current === void 0 ? void 0 : _messageRef$current.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  });\n\n  var loadMoreUsersHandler = function loadMoreUsersHandler() {\n    var endCursor = data.users.pageInfo.endCursor;\n    fetchMore({\n      variables: {\n        after: endCursor\n      },\n      updateQuery: function updateQuery(prevResult, _ref) {\n        var fetchMoreResult = _ref.fetchMoreResult;\n        fetchMoreResult.users.edges = [].concat(_toConsumableArray(prevResult.users.edges), _toConsumableArray(fetchMoreResult.users.edges));\n        return fetchMoreResult;\n      }\n    });\n  };\n\n  if (error) return /*#__PURE__*/_jsx(\"div\", {\n    children: \"Error\"\n  });\n  if (loading) return /*#__PURE__*/_jsx(Spinner, {});\n\n  if (data && data.users.edges.length > 0) {\n    return /*#__PURE__*/_jsxs(React.Fragment, {\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: styles.usersWrapper,\n        children: data.users.edges.map(function (user) {\n          return /*#__PURE__*/_jsx(UserCard, {\n            userInfo: user.node\n          }, uniqid());\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: styles.userActions,\n        ref: messageRef,\n        children: /*#__PURE__*/_jsx(\"button\", {\n          className: styles.loadMoreButton,\n          onClick: function onClick() {\n            return loadMoreUsersHandler();\n          },\n          children: \" Load more..\"\n        })\n      })]\n    });\n  }\n};","map":null,"metadata":{},"sourceType":"module"}